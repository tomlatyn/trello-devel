/* Consolidated CSS - All Used Styles */

/* Global Styles */
* {
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
}

/* View wrapper - contains the whole view with background and radius */
.view-wrapper {
    padding: 8px;
    background-color: var(--ds-surface, white);
    color: var(--ds-text, #172b4d);
    font-size: 14px;
    line-height: 1.4;
    border-radius: 8px;
    box-sizing: border-box;
}

/* Dark mode styles - triggered by body.dark-mode class */
body.dark-mode .view-wrapper {
    background-color: #282E32 !important;
    color: #b6c2cf !important;
}

/* Utility Classes */
.hidden {
    display: none !important;
}

/* Loading Styles */
.loading {
    text-align: center;
    padding: 20px;
    color: var(--ds-text-subtle, #6b778c);
    font-size: 10px;
    background-color: var(--ds-surface, white);
}

body.dark-mode .loading {
    background-color: #1d2125 !important;
    color: #9fadbc !important;
}

.spinner {
    display: inline-block;
    width: 16px;
    height: 16px;
    border: 2px solid #e1e4e8;
    border-radius: 50%;
    border-top-color: #0366d6;
    animation: spin 1s ease-in-out infinite;
    margin-right: 8px;
}

/* Loading for manage-approvals (different sizing) */
#loading.loading {
    padding: 32px;
}

#loading .spinner {
    width: 20px;
    height: 20px;
    border: 2px solid #dfe1e6;
    border-top-color: #0079bf;
    margin-bottom: 8px;
    margin-right: 0;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Main Containers */
.approval-container {
    overflow: hidden;
}

/* .content styles handled by body.manage-approvals */

/* Headers */
.approval-header {
    background-color: var(--ds-surface-raised, #f8f9fa);
    padding: 8px 12px;
    border-bottom: 1px solid var(--ds-border, #e1e4e8);
    font-weight: 600;
    font-size: 14px;
    color: var(--ds-text, #24292e);
}

body.dark-mode .approval-header {
    background-color: #22272b !important;
    border-bottom: 1px solid #2c333a !important;
    color: #b6c2cf !important;
}

/* Member Items */
.approval-member {
    display: flex;
    align-items: center;
    padding: 10px;
    position: relative;
}

/* Divider between rows and after last row */
.approval-member::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 0;
    right: 0;
    height: 1px;
    background-color: #DDDFE5;
    margin: 5px 0;
}


body.dark-mode .approval-member::after {
    background-color: #374149;
}

/* New member item design */
.member-item {
    display: flex;
    align-items: center;
    max-width: 100%;
    padding: 10px;
    cursor: pointer;
    transition: background-color 0.1s ease;
    position: relative;
}

.member-item:hover {
    background-color: #f4f5f7;
}

.member-item.selected {
    background-color: #E5F0FF;
}

body.dark-mode .member-item:hover {
    background-color: #22272b;
}

body.dark-mode .member-item.selected {
    background-color: #1C2B41;
}

/* Divider between rows */
.member-item:not(:last-child)::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 0;
    right: 0;
    height: 1px;
    background-color: #DDDFE5;
    margin: 5px 0;
}

body.dark-mode .member-item:not(:last-child)::after {
    background-color: #374149;
}


/* Member Info */
.member-info {
    display: flex;
    align-items: center;
    min-width: 0;
    flex: 1;
    margin-right: 12px;
}

/* New container layout for approval section */
.member-left-container {
    display: flex;
    align-items: center;
    width: 50%;
    min-width: 0;
}

.member-right-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 50%;
    min-width: 0;
}

/* Avatar Styles */
.avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    margin-right: 12px;
    flex-shrink: 0;
    overflow: hidden;
    background: linear-gradient(45deg, #0366d6, #0256cc);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* Avatar for manage-approvals (new sizing) */
.member-item .avatar {
    width: 32px;
    height: 32px;
    background: linear-gradient(45deg, #0079bf, #026aa7);
    font-size: 12px;
    box-shadow: 0 1px 1px rgba(9, 30, 66, 0.25);
    margin-right: 12px;
    flex-shrink: 0;
}

.avatar img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
}

.member-name {
    font-weight: 600;
    color: #44546F;
    font-size: 14px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex: 1;
    min-width: 0;
}

/* Member name for manage-approvals */
.member-item .member-name {
    color: #44546F;
    font-size: 14px;
    font-weight: 600;
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.member-username {
    color: var(--ds-text-subtle, #6b778c);
    font-size: 12px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

body.dark-mode .member-name {
    color: #B6C2CF !important;
}

body.dark-mode .member-item .member-name {
    color: #B6C2CF !important;
}

/* Checkmark for selected members */
.member-checkmark {
    width: 24px;
    height: 24px;
    margin-left: auto;
    flex-shrink: 0;
    /* Color matches member name: #44546F */
    filter: brightness(0) saturate(100%) invert(31%) sepia(23%) saturate(1058%) hue-rotate(194deg) brightness(95%) contrast(89%);
}

body.dark-mode .member-checkmark {
    /* Color matches member name in dark mode: #B6C2CF */
    filter: brightness(0) saturate(100%) invert(80%) sepia(23%) saturate(1058%) hue-rotate(169deg) brightness(103%) contrast(101%);
}

body.dark-mode .member-username {
    color: #9fadbc !important;
}

/* Status Section */
.status-section {
    display: flex;
    justify-content: flex-end;
    align-items: center;
}


.approval-status {
    padding: 4px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
    text-transform: capitalize;
    letter-spacing: 0.3px;
    display: inline-block;
    text-align: left;
}

.status-pending {
    background-color: #DFD8FD;
    color: #362C63;
}

.status-approved {
    background-color: #BAF3DB;
    color: #174B35;
}

.status-rejected {
    background-color: #FFD5D2;
    color: #5D1F1A;
}

/* Dark mode member status tags */
body.dark-mode .status-pending {
    background-color: #362C63;
    color: #DFD8FD;
}

body.dark-mode .status-approved {
    background-color: #174B35;
    color: #BAF3DB;
}

body.dark-mode .status-rejected {
    background-color: #5D1F1A;
    color: #FFD5D2;
}

/* Status Banner */
.status-banner {
    max-width: 100%;
    border-radius: 4px;
    font-size: 14px;
    font-weight: 600;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: 8px;
    padding: 10px;
}

.banner-pending {
    background-color: #DFD8FD;
    color: #362C63;
}

.banner-approved {
    background-color: #DEFFE6;
    color: #174B35;
}

.banner-rejected {
    background-color: #FFD5D2;
    color: #5D1F1A;
}

/* Dark mode status banner */
body.dark-mode .banner-pending {
    background-color: #2E2E4A;
    color: #DFD8FD;
}

body.dark-mode .banner-approved {
    background-color: #345B45;
    color: #BAF3DB;
}

body.dark-mode .banner-rejected {
    background-color: #593538;
    color: #FFD5D2;
}

/* Action Buttons */
.action-buttons {
    display: flex;
    gap: 8px;
    opacity: 1;
    flex-shrink: 0;
    justify-content: flex-end;
}

.action-buttons:not(:empty) {
    margin-left: 16px;
}

/* Current user row styling */
.approval-member.current-user {
    background-color: #EAEAEA;
}

body.dark-mode .approval-member.current-user {
    background-color: #23262A;
}

/* Action buttons for manage-approvals */
.content .action-buttons {
    margin-top: 0;
    margin-left: -16px;
    margin-right: -16px;
    gap: 8px;
    padding: 0 16px;
    opacity: 1;
    display: flex;
    flex-direction: column;
    width: calc(100% + 32px);
}


.action-btn {
    padding: 4px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
    font-weight: 500;
    transition: all 0.1s ease;
    background-color: #F6F6F7;
    color: #182A4E;
    display: flex;
    align-items: center;
    gap: 4px;
    box-sizing: border-box;
}

.action-btn:hover {
    background-color: #e8e9ea;
}

.approve-btn, .reject-btn, .reset-btn {
    background-color: #F6F6F7;
    color: #182A4E;
}

.approve-btn:hover, .reject-btn:hover, .reset-btn:hover {
    background-color: #e8e9ea;
}

/* Dark mode action buttons */
body.dark-mode .action-btn,
body.dark-mode .approve-btn,
body.dark-mode .reject-btn,
body.dark-mode .reset-btn {
    background-color: #2C333A;
    color: #B6C2CF;
}

body.dark-mode .action-btn:hover,
body.dark-mode .approve-btn:hover,
body.dark-mode .reject-btn:hover,
body.dark-mode .reset-btn:hover {
    background-color: #252b31;
}

/* Button icons with hex colors */
.btn-icon {
    flex-shrink: 0;
    width: 16px !important;
    height: 16px !important;
}

/* Light mode: use #182A4E color */
.btn-icon {
    filter: brightness(0) saturate(100%) invert(12%) sepia(44%) saturate(1631%) hue-rotate(192deg) brightness(99%) contrast(92%);
}

/* Dark mode: use #B6C2CF color */
body.dark-mode .btn-icon {
    filter: brightness(0) saturate(100%) invert(85%) sepia(12%) saturate(288%) hue-rotate(171deg) brightness(91%) contrast(88%);
}

/* New Button Styles - General button template */
.btn-primary, .btn-secondary, .btn-create {
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
    font-weight: 500;
    padding: 10px;
    transition: all 0.1s ease;
    width: 100%;
    text-align: center;
}

/* Create Approvals Button */
.btn-create {
    background-color: #20845A;
    color: white;
}

.btn-create:hover:not(:disabled) {
    background-color: #1a6e49;
}

.btn-create:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

/* Save Changes Button */
.btn-primary {
    background-color: #007AD5;
    color: white;
}

.btn-primary:hover:not(:disabled) {
    background-color: #0066b3;
}

.btn-primary:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

/* Delete Approvals Button */
.btn-secondary {
    background-color: #F6F6F7;
    color: #182A4E;
}

.btn-secondary:hover {
    background-color: #e8e9ea;
}

/* Dark mode button styles */
body.dark-mode .btn-create {
    background-color: #345B45;
    color: #BAF3DB;
}

body.dark-mode .btn-create:hover:not(:disabled) {
    background-color: #2d4f3b;
}

body.dark-mode .btn-primary {
    background-color: #0A326C;
    color: #CCE0FF;
}

body.dark-mode .btn-primary:hover:not(:disabled) {
    background-color: #092951;
}

body.dark-mode .btn-secondary {
    background-color: #2C333A;
    color: #B6C2CF;
}

body.dark-mode .btn-secondary:hover {
    background-color: #252b31;
}

/* Dark mode disabled button opacity */
body.dark-mode .btn-create:disabled,
body.dark-mode .btn-primary:disabled {
    opacity: 0.2;
}

/* Count and Selection Styles */
.member-count {
    font-size: 12px;
    color: #6b778c;
    margin-bottom: 12px;
}



/* First member row spacing */
.member-item:first-child {
    margin-top: 2px;
}

/* Empty States */
.no-approvals {
    text-align: center;
    padding: 20px;
    color: var(--ds-text-subtle, #6b778c);
    font-style: italic;
    font-size: 10px;
    background-color: var(--ds-surface, white);
}

.error {
    text-align: center;
    padding: 20px;
    color: #ef4444;
    font-size: 10px;
    background-color: var(--ds-surface, white);
}

/* Error for manage-approvals */
#error.error {
    padding: 32px;
    color: #eb5a46;
}

body.dark-mode .no-approvals {
    background-color: #1d2125 !important;
    color: #9fadbc !important;
}

body.dark-mode .error {
    background-color: #1d2125 !important;
    color: #f87168 !important;
}

body.dark-mode #error.error {
    color: #f87168 !important;
}

#error button {
    margin-top: 12px;
    padding: 8px 16px;
    background-color: #eb5a46;
    color: white;
    border: none;
    border-radius: 3px;
    cursor: pointer;
    font-size: 14px;
}

#error button:hover {
    background-color: #cf513d;
}

/* Button Icons styles handled inline in JavaScript */

/* Responsive Styles */
@media (max-width: 400px) {
    .approval-member {
        padding: 6px 8px;
    }
    
    .approval-header {
        padding: 6px 8px;
    }
    
    .avatar {
        width: 24px;
        height: 24px;
        font-size: 10px;
    }
    
    .member-name {
        font-size: 10px;
    }
    
    .status-section {
        width: 80px;
    }
    
    .action-buttons {
        opacity: 1; /* Always show on mobile */
    }
}

/* Manage-approvals specific body styles */
body.manage-approvals {
    padding: 0;
    background-color: var(--ds-surface, #ffffff);
    height: 100vh;
}

/* Content padding update */
body.manage-approvals .content {
    padding: 0;
    height: 100vh;
    display: flex;
    flex-direction: column;
}

/* Persons section styling */
.persons-section {
    margin-bottom: 16px;
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;
}

/* Members container with background (includes header and list) */
.members-container {
    background-color: #F8F8F8;
    border-radius: 5px;
    padding: 16px 12px;
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;
}

body.dark-mode .members-container {
    background-color: #1D2125;
}

/* Members list */
.members-list {
    flex: 1;
    overflow-y: auto;
    min-height: 0;
}

/* Persons header row */
.persons-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2px;
}

.approvers-label {
    font-size: 10px;
    color: #5E6C84;
    font-weight: 500;
}

.selected-count {
    font-size: 10px;
    color: #5E6C84;
    font-weight: 500;
}

/* Dark mode colors */
body.dark-mode .approvers-label,
body.dark-mode .selected-count {
    color: #B6C2CF;
}

body.dark-mode.manage-approvals {
    background-color: #282E32 !important;
}